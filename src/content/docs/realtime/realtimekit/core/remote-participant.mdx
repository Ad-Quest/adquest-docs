---
pcx_content_type: navigation
title: Remote Participant
slug: realtime/realtimekit/core/remote-participant
sidebar:
  order: 5
---

import { Tabs, TabItem } from "~/components";

This guide explains how to access participant data, display videos, handle events, and manage participant permissions in your RealtimeKit meetings.

:::note[Prerequisites]
This page assumes you've already initialized the SDK and understand the meeting object structure. Refer to [Initialize SDK](/realtime/realtimekit/core/) and [Meeting Object Explained](/realtime/realtimekit/core/meeting-object-explained/) if needed.
:::

## Participant Maps

<Tabs syncKey="realtimeKitFrameworkTabs">
<TabItem label="Web Components">

The data regarding all meeting participants is stored under `meeting.participants`. These do not include the local user.

The `meeting.participants` object contains the following maps:

- **`joined`** - All participants currently in the meeting (excluding the local user)
- **`waitlisted`** - All participants waiting to join the meeting
- **`active`** - All participants whose media is subscribed to (participants that should be displayed on screen)
- **`pinned`** - All pinned participants in the meeting

If you're building a video/audio grid, you'd use the `active` map. To display a list of all participants, use the `joined` map.

Each participant in these maps is of type `RTKParticipant`.

### Access Participant Maps

```js
// Get all joined participants
const joinedParticipants = meeting.participants.joined;

// Get active participants (those on screen)
const activeParticipants = meeting.participants.active;

// Get pinned participants
const pinnedParticipants = meeting.participants.pinned;

// Get waitlisted participants
const waitlistedParticipants = meeting.participants.waitlisted;
```

### Listen to Participant Map Events

Each participant map emits `participantJoined` and `participantLeft` events:

```js
// Listen for when a participant gets pinned
meeting.participants.pinned.on("participantJoined", (participant) => {
	console.log(`Participant ${participant.name} got pinned`);
});

// Listen for when a participant gets unpinned
meeting.participants.pinned.on("participantLeft", (participant) => {
	console.log(`Participant ${participant.name} got unpinned`);
});
```

### Participant Map Properties

```js
// Number of participants joined in the meeting
console.log(meeting.participants.count);

// Number of pages available in paginated mode
console.log(meeting.participants.pageCount);

// Maximum number of participants in active state
console.log(meeting.participants.maxActiveParticipantsCount);

// ParticipantId of the last participant who spoke
console.log(meeting.participants.lastActiveSpeaker);
```

</TabItem>
<TabItem label="React">

The data regarding all meeting participants is stored under `meeting.participants`. These do not include the local user.

The `meeting.participants` object contains the following maps:

- **`joined`** - All participants currently in the meeting (excluding the local user)
- **`waitlisted`** - All participants waiting to join the meeting
- **`active`** - All participants whose media is subscribed to (participants that should be displayed on screen)
- **`pinned`** - All pinned participants in the meeting

If you're building a video/audio grid, you'd use the `active` map. To display a list of all participants, use the `joined` map.

Each participant in these maps is of type `RTKParticipant`.

### Access Participant Maps

Use the `useRealtimeKitSelector` hook to access participant maps:

```jsx
import { useRealtimeKitSelector } from "@cloudflare/realtimekit-react";

// Get all joined participants
const joinedParticipants = useRealtimeKitSelector((m) => m.participants.joined);

// Get active participants (those on screen)
const activeParticipants = useRealtimeKitSelector((m) => m.participants.active);

// Get pinned participants
const pinnedParticipants = useRealtimeKitSelector((m) => m.participants.pinned);

// Get waitlisted participants
const waitlistedParticipants = useRealtimeKitSelector(
	(m) => m.participants.waitlisted,
);
```

### Listen to Participant Map Events

You can also use event listeners for specific actions:

```jsx
import { useRealtimeKitClient } from "@cloudflare/realtimekit-react";

function ParticipantListener() {
	const [meeting] = useRealtimeKitClient();

	useEffect(() => {
		if (!meeting) return;

		const handleParticipantPinned = (participant) => {
			console.log(`Participant ${participant.name} got pinned`);
		};

		meeting.participants.pinned.on(
			"participantJoined",
			handleParticipantPinned,
		);

		return () => {
			meeting.participants.pinned.off(
				"participantJoined",
				handleParticipantPinned,
			);
		};
	}, [meeting]);
}
```

### Participant Map Properties

```jsx
// Number of participants joined in the meeting
const participantCount = useRealtimeKitSelector((m) => m.participants.count);

// Number of pages available in paginated mode
const pageCount = useRealtimeKitSelector((m) => m.participants.pageCount);

// Maximum number of participants in active state
const maxActiveCount = useRealtimeKitSelector(
	(m) => m.participants.maxActiveParticipantsCount,
);

// ParticipantId of the last participant who spoke
const lastActiveSpeaker = useRealtimeKitSelector(
	(m) => m.participants.lastActiveSpeaker,
);
```

</TabItem>
</Tabs>

## Participant View Modes

The view mode indicates whether participants are populated in `ACTIVE_GRID` mode or `PAGINATED` mode.

- **`ACTIVE_GRID` mode** - Participants are automatically replaced in `meeting.participants.active` based on who is speaking or who has their video turned on
- **`PAGINATED` mode** - Participants in `meeting.participants.active` are fixed. Use `setPage()` to change the active participants

<Tabs syncKey="realtimeKitFrameworkTabs">
<TabItem label="Web Components">

### Set View Mode

```js
// Set the view mode to paginated
await meeting.participants.setViewMode("PAGINATED");

// Set the view mode to active grid
await meeting.participants.setViewMode("ACTIVE_GRID");
```

### Set Page in Paginated Mode

```js
// Switch to second page
await meeting.participants.setPage(2);
```

</TabItem>
<TabItem label="React">

### Set View Mode

```jsx
// Set the view mode to paginated
await meeting.participants.setViewMode("PAGINATED");

// Set the view mode to active grid
await meeting.participants.setViewMode("ACTIVE_GRID");
```

### Set Page in Paginated Mode

```jsx
// Switch to second page
await meeting.participants.setPage(2);
```

### Monitor View Mode

```jsx
const viewMode = useRealtimeKitSelector((m) => m.participants.viewMode);
const currentPage = useRealtimeKitSelector((m) => m.participants.currentPage);
```

</TabItem>
</Tabs>

## Waiting Room Methods

<Tabs syncKey="realtimeKitFrameworkTabs">
<TabItem label="Web Components">

### Accept Waiting Room Request

```js
await meeting.participants.acceptWaitingRoomRequest(participantId);
```

### Reject Waiting Room Request

```js
await meeting.participants.rejectWaitingRoomRequest(participantId);
```

</TabItem>
<TabItem label="React">

### Accept Waiting Room Request

```jsx
await meeting.participants.acceptWaitingRoomRequest(participantId);
```

### Reject Waiting Room Request

```jsx
await meeting.participants.rejectWaitingRoomRequest(participantId);
```

</TabItem>
</Tabs>

## Participant Object

The participant object contains all information related to a particular participant, including their video/audio/screenshare streams, name, and state variables.

### Participant Properties

**Media Properties:**

- `videoEnabled` - Set to `true` if the participant's camera is on
- `audioEnabled` - Set to `true` if the participant is unmuted
- `screenShareEnabled` - Set to `true` if the participant is sharing their screen
- `videoTrack` - The video track of the participant
- `audioTrack` - The audio track of the participant
- `screenShareTracks` - The video and audio tracks of the participant's screen share

**Metadata Properties:**

- `id` - The `participantId` of the participant (aka `peerId`)
- `userId` - The `userId` of the participant
- `name` - The participant's name
- `picture` - The participant's picture (if any)
- `customParticipantId` - An arbitrary ID that can be set to identify the participant
- `isPinned` - Set to `true` if the participant is pinned
- `presetName` - Name of the preset associated with the participant

<Tabs syncKey="realtimeKitFrameworkTabs">
<TabItem label="Web Components">

### Access Participant Object

```js
const participant = meeting.participants.joined.get(participantId);

// Access participant properties
console.log(participant.name);
console.log(participant.videoEnabled);
console.log(participant.audioEnabled);
```

### Listen to Participant Events

Each participant object is an event emitter:

```js
meeting.participants.joined
	.get(participantId)
	.on("audioUpdate", ({ audioEnabled, audioTrack }) => {
		console.log(
			"The participant with id",
			participantId,
			"has toggled their mic to",
			audioEnabled,
		);
	});
```

Alternatively, listen on the participant map for all participants:

```js
meeting.participants.joined.on(
	"audioUpdate",
	(participant, { audioEnabled, audioTrack }) => {
		console.log(
			"The participant with id",
			participant.id,
			"has toggled their mic to",
			audioEnabled,
		);
	},
);
```

### Host Control Methods

If you have the relevant permissions, you can control participant media:

```js
const participant = meeting.participants.joined.get(participantId);

// Disable a participant's video stream
participant.disableVideo();

// Disable a participant's audio stream
participant.disableAudio();

// Kick a participant from the meeting
participant.kick();
```

### Pin and Unpin Participants

```js
const participant = meeting.participants.joined.get(participantId);

// Pin a participant
await participant.pin();

// Unpin a participant
await participant.unpin();
```

</TabItem>
<TabItem label="React">

### Access Participant Object

```jsx
// Get a specific participant
const participant = useRealtimeKitSelector((m) =>
	m.participants.joined.get(participantId),
);

// Access participant properties
const participantName = participant?.name;
const isVideoEnabled = participant?.videoEnabled;
const isAudioEnabled = participant?.audioEnabled;
```

### Listen to Participant Events

```jsx
import { useRealtimeKitClient } from "@cloudflare/realtimekit-react";

function ParticipantAudioListener({ participantId }) {
	const [meeting] = useRealtimeKitClient();

	useEffect(() => {
		if (!meeting) return;

		const handleAudioUpdate = ({ audioEnabled, audioTrack }) => {
			console.log(
				"The participant with id",
				participantId,
				"has toggled their mic to",
				audioEnabled,
			);
		};

		const participant = meeting.participants.joined.get(participantId);
		participant.on("audioUpdate", handleAudioUpdate);

		return () => {
			participant.off("audioUpdate", handleAudioUpdate);
		};
	}, [meeting, participantId]);
}
```

Or use the selector for specific properties:

```jsx
const audioEnabled = useRealtimeKitSelector(
	(m) => m.participants.joined.get(participantId)?.audioEnabled,
);
```

### Host Control Methods

If you have the relevant permissions, you can control participant media:

```jsx
const participant = meeting.participants.joined.get(participantId);

// Disable a participant's video stream
participant.disableVideo();

// Disable a participant's audio stream
participant.disableAudio();

// Kick a participant from the meeting
participant.kick();
```

### Pin and Unpin Participants

```jsx
const participant = meeting.participants.joined.get(participantId);

// Pin a participant
await participant.pin();

// Unpin a participant
await participant.unpin();
```

</TabItem>
</Tabs>

## Display Participant Videos

<Tabs syncKey="realtimeKitFrameworkTabs">
<TabItem label="Web Components">

### Register Video Element

To play a participant's video track on a `<video>` element:

```html
<video class="participant-video" id="participant-video"></video>
```

```js
// Get the video element
const videoElement = document.getElementById("participant-video");

// Get the participant
const participant = meeting.participants.joined.get(participantId);

// Register the video element
participant.registerVideoElement(videoElement);
```

For local user preview (video not sent to other users):

```js
meeting.self.registerVideoElement(videoElement, true);
```

### Deregister Video Element

Clean up when the video element is no longer needed:

```js
participant.deregisterVideoElement(videoElement);
```

</TabItem>
<TabItem label="React">

### Using UI Kit Grid Components

RealtimeKit provides ready-to-use grid components for displaying participant videos:

```jsx
import { RtkGrid } from "@cloudflare/realtimekit-react-ui";

function MeetingGrid() {
	return <RtkGrid />;
}
```

The `RtkGrid` component handles all grid-related events and data automatically. It supports:

- **`RtkSimpleGrid`** - Renders participant tiles in a simple grid
- **`RtkSpotlightGrid`** - Renders pinned participants in a spotlight area with others in a smaller grid
- **`RtkMixedGrid`** - Renders screenshares and plugins in the main view with a configurable smaller grid

### Manual Video Rendering

For custom video rendering, use the `RtkParticipantTile` component:

```jsx
import { RtkParticipantTile } from "@cloudflare/realtimekit-react-ui";
import { useRealtimeKitSelector } from "@cloudflare/realtimekit-react";

function CustomVideoGrid() {
	const participants = useRealtimeKitSelector((m) =>
		m.participants.active.toArray(),
	);

	return (
		<div
			style={{
				display: "grid",
				gridTemplateColumns: "repeat(auto-fit, minmax(300px, 1fr))",
			}}
		>
			{participants.map((participant) => (
				<RtkParticipantTile key={participant.id} participant={participant} />
			))}
		</div>
	);
}
```

</TabItem>
</Tabs>

## Participant Events

<Tabs syncKey="realtimeKitFrameworkTabs">
<TabItem label="Web Components">

### View Mode Change

Triggered when the view mode changes:

```js
meeting.participants.on(
	"viewModeChanged",
	({ viewMode, currentPage, pageCount }) => {
		console.log("view mode changed", viewMode);
	},
);
```

### Page Change

Triggered when the page changes in paginated mode:

```js
meeting.participants.on(
	"pageChanged",
	({ viewMode, currentPage, pageCount }) => {
		console.log("page changed", currentPage);
	},
);
```

### Active Speaker

Triggered when a participant starts speaking:

```js
meeting.participants.on("activeSpeaker", (participant) => {
	console.log(`${participant.id} is currently speaking`);
});
```

### Participant Joined

Triggered when any participant joins the meeting:

```js
meeting.participants.joined.on("participantJoined", (participant) => {
	console.log(`A participant with id "${participant.id}" has joined`);
});
```

### Participant Left

Triggered when any participant leaves the meeting:

```js
meeting.participants.joined.on("participantLeft", (participant) => {
	console.log(`A participant with id "${participant.id}" has left the meeting`);
});
```

### Participant Pinned

Triggered when a participant is pinned:

```js
meeting.participants.joined.on("pinned", (participant) => {
	console.log(`Participant with id "${participant.id}" was pinned`);
});
```

### Participant Unpinned

Triggered when a participant is unpinned:

```js
meeting.participants.joined.on("unpinned", (participant) => {
	console.log(`Participant with id "${participant.id}" was unpinned`);
});
```

### Video Update

Triggered when any participant starts/stops video:

```js
meeting.participants.joined.on("videoUpdate", (participant) => {
	console.log(
		`A participant with id "${participant.id}" updated their video track`,
	);

	if (participant.videoEnabled) {
		// Use participant.videoTrack
	} else {
		// Handle stop video
	}
});
```

### Audio Update

Triggered when any participant starts/stops audio:

```js
meeting.participants.joined.on("audioUpdate", (participant) => {
	console.log(
		`A participant with id "${participant.id}" updated their audio track`,
	);

	if (participant.audioEnabled) {
		// Use participant.audioTrack
	} else {
		// Handle stop audio
	}
});
```

### Screen Share Update

Triggered when any participant starts/stops screen share:

```js
meeting.participants.joined.on("screenShareUpdate", (participant) => {
	console.log(
		`A participant with id "${participant.id}" updated their screen share`,
	);

	if (participant.screenShareEnabled) {
		// Use participant.screenShareTracks
	} else {
		// Handle stop screen share
	}
});
```

### Network Quality Score

Monitor participant network quality:

```js
meeting.participants.joined.on(
	"mediaScoreUpdate",
	({ participantId, kind, isScreenshare, score, scoreStats }) => {
		if (kind === "video") {
			console.log(
				`Participant ${participantId}'s ${isScreenshare ? "screenshare" : "video"} quality score is`,
				score,
			);
		}

		if (kind === "audio") {
			console.log(
				`Participant ${participantId}'s audio quality score is`,
				score,
			);
		}

		if (score < 5) {
			console.log(`Participant ${participantId}'s media quality is poor`);
		}
	},
);
```

</TabItem>
<TabItem label="React">

### View Mode Change

```jsx
const viewMode = useRealtimeKitSelector((m) => m.participants.viewMode);
```

Or use event listener:

```jsx
meeting.participants.on(
	"viewModeChanged",
	({ viewMode, currentPage, pageCount }) => {
		console.log("view mode changed", viewMode);
	},
);
```

### Page Change

```jsx
const currentPage = useRealtimeKitSelector((m) => m.participants.currentPage);
const pageCount = useRealtimeKitSelector((m) => m.participants.pageCount);
```

### Active Speaker

```jsx
const activeSpeaker = useRealtimeKitSelector(
	(m) => m.participants.lastActiveSpeaker,
);
```

Or use event listener:

```jsx
meeting.participants.on("activeSpeaker", (participant) => {
	console.log(`${participant.id} is currently speaking`);
});
```

### Participant Joined

```jsx
const joinedParticipants = useRealtimeKitSelector((m) => m.participants.joined);
```

Or use event listener:

```jsx
meeting.participants.joined.on("participantJoined", (participant) => {
	console.log(`A participant with id "${participant.id}" has joined`);
});
```

### Participant Left

```jsx
const joinedParticipants = useRealtimeKitSelector((m) => m.participants.joined);
```

Or use event listener:

```jsx
meeting.participants.joined.on("participantLeft", (participant) => {
	console.log(`A participant with id "${participant.id}" has left the meeting`);
});
```

### Participant Pinned/Unpinned

```jsx
const pinnedParticipants = useRealtimeKitSelector((m) => m.participants.pinned);
```

### Video Update

```jsx
// Check for one participant
const videoEnabled = useRealtimeKitSelector(
	(m) => m.participants.joined.get(participantId)?.videoEnabled,
);

// All video enabled participants
const videoEnabledParticipants = useRealtimeKitSelector((m) =>
	m.participants.joined.toArray().filter((p) => p.videoEnabled),
);
```

### Audio Update

```jsx
// Check for one participant
const audioEnabled = useRealtimeKitSelector(
	(m) => m.participants.joined.get(participantId)?.audioEnabled,
);

// All audio enabled participants
const audioEnabledParticipants = useRealtimeKitSelector((m) =>
	m.participants.joined.toArray().filter((p) => p.audioEnabled),
);
```

### Screen Share Update

```jsx
// Check for one participant
const screensharingParticipant = useRealtimeKitSelector((m) =>
	m.participants.joined.toArray().find((p) => p.screenShareEnabled),
);

// All screen sharing participants
const screenSharingParticipants = useRealtimeKitSelector((m) =>
	m.participants.joined.toArray().filter((p) => p.screenShareEnabled),
);
```

### Network Quality Score

```jsx
// Use event listener for media score updates
useEffect(() => {
	if (!meeting) return;

	const handleMediaScoreUpdate = ({
		participantId,
		kind,
		isScreenshare,
		score,
		scoreStats,
	}) => {
		if (kind === "video") {
			console.log(
				`Participant ${participantId}'s ${isScreenshare ? "screenshare" : "video"} quality score is`,
				score,
			);
		}

		if (score < 5) {
			console.log(`Participant ${participantId}'s media quality is poor`);
		}
	};

	meeting.participants.joined.on("mediaScoreUpdate", handleMediaScoreUpdate);

	return () => {
		meeting.participants.joined.off("mediaScoreUpdate", handleMediaScoreUpdate);
	};
}, [meeting]);
```

</TabItem>
</Tabs>

## Picture-in-Picture

Picture-in-Picture API allows you to render `meeting.participants.active` participant's video as a floating tile outside of the current webpage's context.

:::note
Supported in Chrome/Edge/Chromium-based browsers only.
:::

<Tabs syncKey="realtimeKitFrameworkTabs">
<TabItem label="Web Components">

### Check if Supported

```js
const isSupported = meeting.participants.pip.isSupported();
```

### Enable Picture-in-Picture

```js
await meeting.participants.pip.enable();
```

### Disable Picture-in-Picture

```js
await meeting.participants.pip.disable();
```

</TabItem>
<TabItem label="React">

### Check if Supported

```jsx
const isSupported = meeting.participants.pip.isSupported();
```

### Enable Picture-in-Picture

```jsx
await meeting.participants.pip.enable();
```

### Disable Picture-in-Picture

```jsx
await meeting.participants.pip.disable();
```

</TabItem>
</Tabs>

## Update Participant Permissions

Permissions for a participant are defined by the preset, but can be updated during a meeting by calling `updatePermissions` for remote participants.

<Tabs syncKey="realtimeKitFrameworkTabs">
<TabItem label="Web Components">

### Find Target Participants

```js
const participantIds = meeting.participants.joined
	.toArray()
	.filter((e) => e.name.startsWith("John"))
	.map((p) => p.id);
```

### Update Permissions

```js
// Allow file upload permissions in public chat
const newPermissions = {
	chat: {
		public: {
			files: true,
		},
	},
};

meeting.participants.updatePermissions(participantIds, newPermissions);
```

### Available Permission Fields

```typescript
interface UpdatedPermissions {
	polls?: {
		canCreate?: boolean;
		canVote?: boolean;
	};
	plugins?: {
		canClose?: boolean;
		canStart?: boolean;
	};
	chat?: {
		public?: {
			canSend?: boolean;
			text?: boolean;
			files?: boolean;
		};
		private?: {
			canSend?: boolean;
			text?: boolean;
			files?: boolean;
		};
	};
}
```

</TabItem>
<TabItem label="React">

### Find Target Participants

```jsx
const participantIds = meeting.participants.joined
	.toArray()
	.filter((e) => e.name.startsWith("John"))
	.map((p) => p.id);
```

### Update Permissions

```jsx
// Allow file upload permissions in public chat
const newPermissions = {
	chat: {
		public: {
			files: true,
		},
	},
};

meeting.participants.updatePermissions(participantIds, newPermissions);
```

### Available Permission Fields

```typescript
interface UpdatedPermissions {
	polls?: {
		canCreate?: boolean;
		canVote?: boolean;
	};
	plugins?: {
		canClose?: boolean;
		canStart?: boolean;
	};
	chat?: {
		public?: {
			canSend?: boolean;
			text?: boolean;
			files?: boolean;
		};
		private?: {
			canSend?: boolean;
			text?: boolean;
			files?: boolean;
		};
	};
}
```

</TabItem>
</Tabs>
