---
title: Set up address maps
pcx_content_type: how-to
sidebar:
  order: 2
  label: Setup
---

import { GlossaryTooltip, APIRequest, DashButton, Tabs, TabItem } from "~/components";

Consider the sections below to learn how to set up address maps.

:::note
There is **no expected downtime** when setting up or updating your address maps.
:::

## Create address maps

If you are using BYOIP, refer to the following steps. If you have [static IPs](/byoip/concepts/static-ips/), Cloudflare creates an address map during the static IP onboarding process, meaning you may only [edit](#manage-address-maps) the Cloudflare-created map.

<Tabs syncKey="dashPlusAPI"> <TabItem label="Dashboard">

1. In the Cloudflare dashboard, go to the **Address Maps** page.

   <DashButton url="/?to=/:account/ip-addresses/proxy-ips" />

2. Select **Create an address map**.
3. Choose the scope of the address map.
4. Add the zones and IP addresses that you want to map.
5. Name your address map.
6. Review the information and select **Save and Deploy**.

:::note
Creating an address map does not automatically change DNS configuration. DNS responses only begin to change when a zone or account is added to a map. Additionally, address maps that are not yet enabled will not take effect in DNS responses.
:::

</TabItem> <TabItem label="API">

<APIRequest
  path="/accounts/{account_id}/addressing/address_maps"
  method="POST"
  json={{
    description: "Example address map",
    enabled: true,
    ips: [
      "203.0.113.1",
      "203.0.113.2"
    ],
    memberships: [
      {
        identifier: "<ZONE_ID>",
        kind: "zone",
      },
    ],
  }}
/>


:::note
A zone membership will take priority over an account membership.
:::

</TabItem> </Tabs>

## Manage address maps

<Tabs syncKey="dashPlusAPI"> <TabItem label="Dashboard">

1. In the Cloudflare dashboard, go to the **Address Maps** page.

   <DashButton url="/?to=/:account/ip-addresses/proxy-ips" />

2. Go to your address map and select **Review**.
3. Edit your address map.
4. Review the information and select **Save**.

:::note
You can also enable, disable, and delete address maps. This will likely change the IP addresses used for your zones.
:::

</TabItem> <TabItem label="API">

Use the following API endpoints depending on what you want to achieve:

- [Modify the properties of an address map](/api/resources/addressing/subresources/address_maps/methods/edit/)
- [Add or remove IP addresses](/api/resources/addressing/subresources/address_maps/subresources/ips/)
- [Add or remove accounts](/api/resources/addressing/subresources/address_maps/subresources/accounts/)
- [Add or remove zones](/api/resources/addressing/subresources/address_maps/subresources/zones/)

:::note
A zone membership will take priority over an account membership.
:::

</TabItem> </Tabs>

## Non-SNI support

If your visitors use devices that have not been updated since 2011, they may not have <GlossaryTooltip term="Server Name Indication (SNI)">Server Name Indication (SNI)</GlossaryTooltip> support. For further context, refer to [browser compatibility](/ssl/reference/browser-compatibility/#non-sni-support).

Use address maps to specify a hostname as default SNI. This will be used whenever Cloudflare receives a non-SNI TLS handshake.

:::note
Setting up a default SNI is currently only supported via API.
:::

1. If you have not already, create an address map. Refer to the [section above](#create-address-maps) or to the [Create Address Map](/api/resources/addressing/subresources/address_maps/methods/create/) API endpoint.
2. Take note of the address map `id`. If needed, you can use the [List Address Maps](/api/resources/addressing/subresources/address_maps/methods/list/) endpoint to get it.
3. Make sure you add the desired IPs to the address map. Cloudflare will respond with the default SNI on those IPs. Use the dashboard or refer to [Add An IP To An Address Map](/api/resources/addressing/subresources/address_maps/subresources/ips/methods/update/).
4. Configure the `default_sni` value on the address map created in step 1. Refer to the [Update Address Map](/api/resources/addressing/subresources/address_maps/methods/edit/) API endpoint for details. The default SNI can be any valid domain or subdomain owned by your account.

### Spectrum HTTPS applications

Default SNI for Spectrum can only be created via API using the [Create Address Map](/api/resources/addressing/subresources/address_maps/methods/create/) endpoint.

Do not include any membership in your command. Your API command should resemble the following:

<APIRequest
  path="/accounts/{account_id}/addressing/address_maps"
  method="POST"
  json={{
		"description": "default_sni",
		"default_sni": "sni.example.com",
		"enabled": false,
		"ips": ["192.0.0.1"],
		"memberships": [],
	}}
/>