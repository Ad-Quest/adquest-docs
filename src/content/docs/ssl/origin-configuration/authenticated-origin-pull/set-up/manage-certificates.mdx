---
pcx_content_type: how-to
title: Manage certificates
sidebar:
  order: 3
head:
  - tag: title
    content: Manage AOP certificates

---

import { APIRequest } from "~/components";

Refer to the following sections to learn how to manage certificates used with the different Authenticated Origin Pulls setups.

---

## Expired certificates

Cloudflare does not delete client certificates upon expiration unless you send a delete request to the Cloudflare API for the relevant certificate ([Delete a zone-level certificate](/api/resources/origin_tls_client_auth/subresources/zone_certificates/methods/delete/) or [Delete a hostname-level certificate](/api/resources/origin_tls_client_auth/subresources/hostname_certificates/methods/delete/)). If your origin only accepts a valid client certificate, it will drop requests when the certificate expires.

Make sure you have [notifications](/notifications/notification-available/#ssltls) set up to get alerts 30 days and 14 days before an AOP certificate expires.

---

## Use specialized certificates

To apply different client certificates simultaneously at both the zone and hostname level, you can combine zone-level and per-hostname custom certificates.

First, set up [zone-level pulls](/ssl/origin-configuration/authenticated-origin-pull/set-up/zone-level/) using a certificate. Then, upload multiple, specialized certificates for [individual hostnames](/ssl/origin-configuration/authenticated-origin-pull/set-up/per-hostname/). Since per-hostname certificates are more specific, they take precedence over zone certificates.

---

## Replace a certificate without downtime

:::caution[No automatic removal]
Cloudflare does not delete client certificates upon expiration unless you send a delete request to the Cloudflare API for the relevant certificate ([Delete a zone-level certificate](/api/resources/origin_tls_client_auth/subresources/zone_certificates/methods/delete/) or [Delete a hostname-level certificate](/api/resources/origin_tls_client_auth/subresources/hostname_certificates/methods/delete/)).
:::

### Per-hostname

1. [Upload the new certificate](/api/resources/origin_tls_client_auth/subresources/hostname_certificates/methods/create/).
2. [List your certificates](/api/resources/origin_tls_client_auth/subresources/hostname_certificates/methods/list/) and note the ID for the certificate you uploaded.
3. [Enable Authenticated Origin Pulls for the specific hostname](/api/resources/origin_tls_client_auth/subresources/hostnames/methods/update/), using the ID obtained in step 2 to specify the certificate you want to use:

<APIRequest
	path="/zones/{zone_id}/origin_tls_client_auth/hostnames"
	method="PUT"
	json={{
		"config": [
			{
				"enabled": true,
				"hostname": "<HOSTNAME>",
				"cert_id": "<CERT_ID>"
			}
		]
	}}
/>

:::note
If you keep both certificates, the API will state `active` for both but the most recently deployed certificate will be the one enabled and used.
:::

### Zone-level

1. [Upload the new certificate](/api/resources/origin_tls_client_auth/subresources/zone_certificates/methods/create/).
2. [Check whether new certificate is Active](/api/resources/origin_tls_client_auth/subresources/zone_certificates/methods/get/).
3. Once certificate is active, [delete the previous certificate](/api/resources/origin_tls_client_auth/subresources/zone_certificates/methods/delete/).

:::note
If you keep both certificates, the API will state `active` for both but the most recently deployed certificate will be the one enabled and used.
:::