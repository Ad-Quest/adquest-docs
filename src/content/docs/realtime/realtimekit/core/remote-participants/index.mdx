---
pcx_content_type: navigation
title: Remote Participants
sidebar:
  label: Overview
  order: 5
---

import RTKSDKSelector from "~/components/realtimekit/RTKSDKSelector/RTKSDKSelector.astro";
import RTKCodeSnippet from "~/components/realtimekit/RTKCodeSnippet/RTKCodeSnippet.astro";

This guide explains how to access participant data, display videos, handle events, and manage participant permissions in your RealtimeKit meetings.

:::note[Prerequisites]
This page assumes you've already initialized the SDK and understand the meeting object structure. Refer to [Initialize SDK](/realtime/realtimekit/core/) and [Meeting Object Explained](/realtime/realtimekit/core/meeting-object-explained/) if needed.
:::

<RTKSDKSelector />

The participant object contains all information related to a particular participants, including information about the grid and each participants media streams, name, and state variables. It is accessible via `meeting.participants`.

### Properties

#### Metadata Properties:

- `id` - The `participantId` of the participant (aka `peerId`)
- `userId` - The `userId` of the participant
- `name` - The participant's name
- `picture` - The participant's picture (if any)
- `customParticipantId` - An arbitrary ID that can be set to identify the participant
- `isPinned` - Set to `true` if the participant is pinned
- `presetName` - Name of the preset associated with the participant

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
// Number of participants joined in the meeting
console.log(meeting.participants.count);

// Number of pages available in paginated mode
console.log(meeting.participants.pageCount);

// Maximum number of participants in active state
console.log(meeting.participants.maxActiveParticipantsCount);

// ParticipantId of the last participant who spoke
console.log(meeting.participants.lastActiveSpeaker);
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

Use the `useRealtimeKitSelector` hook to access properties:

```jsx
// Number of participants joined in the meeting
const participantCount = useRealtimeKitSelector((m) => m.participants.count);

// Number of pages available in paginated mode
const pageCount = useRealtimeKitSelector((m) => m.participants.pageCount);

// Maximum number of participants in active state
const maxActiveCount = useRealtimeKitSelector(
	(m) => m.participants.maxActiveParticipantsCount,
);

// ParticipantId of the last participant who spoke
const lastActiveSpeaker = useRealtimeKitSelector(
	(m) => m.participants.lastActiveSpeaker,
);
```

</RTKCodeSnippet>
#### Media Properties:

These properties are available on each participant in `meeting.participants`.

- `videoEnabled` - Set to `true` if the participant's camera is on
- `audioEnabled` - Set to `true` if the participant is unmuted
- `screenShareEnabled` - Set to `true` if the participant is sharing their screen
- `videoTrack` - The video track of the participant
- `audioTrack` - The audio track of the participant
- `screenShareTracks` - The video and audio tracks of the participant's screen share

You can fetch a participant from the [Participant Maps](/realtime/realtimekit/core/remote-participants/#participant-maps/).

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
const participant = meeting.participants.joined.get(participantId);

// Access participant properties
console.log(participant.name);
console.log(participant.videoEnabled);
console.log(participant.audioEnabled);
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
// Get a specific participant
const participant = useRealtimeKitSelector((m) =>
	m.participants.joined.get(participantId),
);

// Access participant properties
console.log(participant.name);
console.log(participant.videoEnabled);
console.log(participant.audioEnabled);
```

</RTKCodeSnippet>

## Participant Maps

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

All participants are stored under `meeting.participants`. These do not include the local user.

The `meeting.participants` is an object that contains the following maps:

- **`joined`** - All participants currently in the meeting (excluding the local user)
- **`waitlisted`** - All participants waiting to join the meeting
- **`active`** - All participants whose media is subscribed to (participants that should be displayed on screen)
- **`pinned`** - All pinned participants in the meeting

If you're building a video/audio grid, you'd use the `active` map. To display a list of all participants, use the `joined` map.

Each participant in these maps is of type `RTKParticipant`.

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

The data regarding all meeting participants is stored under `meeting.participants`. These do not include the local user.

The `meeting.participants` object contains the following maps:

- **`joined`** - All participants currently in the meeting (excluding the local user)
- **`waitlisted`** - All participants waiting to join the meeting
- **`active`** - All participants whose media is subscribed to (participants that should be displayed on screen)
- **`pinned`** - All pinned participants in the meeting

If you're building a video/audio grid, you'd use the `active` map. To display a list of all participants, use the `joined` map.

Each participant in these maps is of type `RTKParticipant`.

</RTKCodeSnippet>

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
// Get all joined participants
const joinedParticipants = meeting.participants.joined;

// Get active participants (those on screen)
const activeParticipants = meeting.participants.active;

// Get pinned participants
const pinnedParticipants = meeting.participants.pinned;

// Get waitlisted participants
const waitlistedParticipants = meeting.participants.waitlisted;
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

Use the `useRealtimeKitSelector` hook to access participant maps:

```jsx
import { useRealtimeKitSelector } from "@cloudflare/realtimekit-react";

// Get all joined participants
const joinedParticipants = useRealtimeKitSelector((m) => m.participants.joined);

// Get active participants (those on screen)
const activeParticipants = useRealtimeKitSelector((m) => m.participants.active);

// Get pinned participants
const pinnedParticipants = useRealtimeKitSelector((m) => m.participants.pinned);

// Get waitlisted participants
const waitlistedParticipants = useRealtimeKitSelector(
	(m) => m.participants.waitlisted,
);
```

</RTKCodeSnippet>

## Types of Grids

The SDK offers two kinds of grids out of the box

- **Active Grid** - Participants are automatically replaced in the grid based on who is speaking or has their video turned on.
- **Paginated Grid** - Allows users to view all participants by changing pages. Use `setPage()` to change the current page.

The `viewMode` property indicates which grid type is currently active, It can assume two values: `ACTIVE_GRID` mode or `PAGINATED`.

- **`ACTIVE_GRID` mode** - Participants are automatically replaced in the `meeting.participants.active`map based on their media state.
- **`PAGINATED` mode** - Participants in `meeting.participants.active` are fixed based on the page number. Use `setPage()` to change the active participants.

### Set View Mode

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
// Set the view mode to paginated
await meeting.participants.setViewMode("PAGINATED");

// Set the view mode to active grid
await meeting.participants.setViewMode("ACTIVE_GRID");
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
// Set the view mode to paginated
await meeting.participants.setViewMode("PAGINATED");

// Set the view mode to active grid
await meeting.participants.setViewMode("ACTIVE_GRID");
```

</RTKCodeSnippet>

### Set Page in Paginated Mode

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
// Switch to second page
await meeting.participants.setPage(2);
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
// Switch to second page
await meeting.participants.setPage(2);
```

</RTKCodeSnippet>

### Fetch View Mode

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```jsx
const viewMode = meeting.participants.viewMode;
const currentPage = meeting.participants.currentPage;
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
const viewMode = useRealtimeKitSelector((m) => m.participants.viewMode);
const currentPage = useRealtimeKitSelector((m) => m.participants.currentPage);
```

</RTKCodeSnippet>

## Host Controls

The participant object allows the host, several controls. These can be selected while creating the host [preset](/api/resources/realtime_kit/subresources/presets/methods/create/).

### Media controls

With the correct permissions, the host can disable media for remote participants like so:

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
const participant = meeting.participants.joined.get(participantId);

// Disable a participant's video stream
participant.disableVideo();

// Disable a participant's audio stream
participant.disableAudio();

// Kick a participant from the meeting
participant.kick();
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
const participant = meeting.participants.joined.get(participantId);

// Disable a participant's video stream
participant.disableVideo();

// Disable a participant's audio stream
participant.disableAudio();

// Kick a participant from the meeting
participant.kick();
```

</RTKCodeSnippet>
### Waiting Room Controls

The waiting room allows the host to control which users can join your meeting and when. They can either choose to accept or reject the request.

You can also automate this flow so that users join the meeting automatically when the host joins the meeting, using [presets](/api/resources/realtime_kit/subresources/presets/methods/create/).

#### Accept Waiting Room Request

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
await meeting.participants.acceptWaitingRoomRequest(participantId);
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
await meeting.participants.acceptWaitingRoomRequest(participantId);
```

</RTKCodeSnippet>

#### Reject Waiting Room Request

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
await meeting.participants.rejectWaitingRoomRequest(participantId);
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
await meeting.participants.rejectWaitingRoomRequest(participantId);
```

</RTKCodeSnippet>

#### Pin Participants

The host can choose to pin/unpin participants to the grid. The current limit on pinning is 1 participant.

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
const participant = meeting.participants.joined.get(participantId);

// Pin a participant
await participant.pin();

// Unpin a participant
await participant.unpin();
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
const participant = meeting.participants.joined.get(participantId);

// Pin a participant
await participant.pin();

// Unpin a participant
await participant.unpin();
```

</RTKCodeSnippet>

### Update Participant Permissions

The host can additionally modify the permissions for a participant. Permissions for a participant are defined by their preset.

:::note

When the host updates the permissions for a participant, the preset is not modified and the permission changes are limited to the duration of the meeting.

:::

First, you need to find the participant(s) you want to update.

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
const participantIds = meeting.participants.joined
	.toArray()
	.filter((e) => e.name.startsWith("John"))
	.map((p) => p.id);
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
const participantIds = meeting.participants.joined
	.toArray()
	.filter((e) => e.name.startsWith("John"))
	.map((p) => p.id);
```

</RTKCodeSnippet>

You can use the `updatePermission` method like so to modify the permissions for the participant.

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```js
// Allow file upload permissions in public chat
const newPermissions = {
	chat: {
		public: {
			files: true,
		},
	},
};

meeting.participants.updatePermissions(participantIds, newPermissions);
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```jsx
// Allow file upload permissions in public chat
const newPermissions = {
	chat: {
		public: {
			files: true,
		},
	},
};

meeting.participants.updatePermissions(participantIds, newPermissions);
```

</RTKCodeSnippet>

The following permissions can be modified

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

```typescript
interface UpdatedPermissions {
	polls?: {
		canCreate?: boolean;
		canVote?: boolean;
	};
	plugins?: {
		canClose?: boolean;
		canStart?: boolean;
	};
	chat?: {
		public?: {
			canSend?: boolean;
			text?: boolean;
			files?: boolean;
		};
		private?: {
			canSend?: boolean;
			text?: boolean;
			files?: boolean;
		};
	};
}
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-react">

```typescript
interface UpdatedPermissions {
	polls?: {
		canCreate?: boolean;
		canVote?: boolean;
	};
	plugins?: {
		canClose?: boolean;
		canStart?: boolean;
	};
	chat?: {
		public?: {
			canSend?: boolean;
			text?: boolean;
			files?: boolean;
		};
		private?: {
			canSend?: boolean;
			text?: boolean;
			files?: boolean;
		};
	};
}
```

</RTKCodeSnippet>

## Display Videos in your UI

This guide will show you how to display videos in your custom grid.

Optionally, you can use the `RtkGrid` component from the UI Kit to display participants. This component handles all grid-related events and data automatically.

### Register Video Element

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

To play a participant's video track on a `<video>` element:

```html
<video class="participant-video" id="participant-video"></video>
```

```js
// Get the video element
const videoElement = document.getElementById("participant-video");

// Get the participant
const participant = meeting.participants.joined.get(participantId);

// Register the video element
participant.registerVideoElement(videoElement);
```

For local user preview (video not sent to other users):

```js
meeting.self.registerVideoElement(videoElement, true);
```

</RTKCodeSnippet>

### Deregister Video Element

<RTKCodeSnippet id={["web-web-components", "web-angular"]}>

Clean up when the video element is no longer needed:

```js
participant.deregisterVideoElement(videoElement);
```

</RTKCodeSnippet>

### Using UI Kit Grid

<RTKCodeSnippet id="web-react">

RealtimeKit provides ready-to-use grid components for displaying participant videos:

```jsx
import { RtkGrid } from "@cloudflare/realtimekit-react-ui";

function MeetingGrid() {
	return <RtkGrid />;
}
```

The `RtkGrid` component handles all grid-related events and data automatically. It supports:

- **`RtkSimpleGrid`** - Renders participant tiles in a simple grid
- **`RtkSpotlightGrid`** - Renders pinned participants in a spotlight area with others in a smaller grid
- **`RtkMixedGrid`** - Renders screenshares and plugins in the main view with a configurable smaller grid

</RTKCodeSnippet>

<RTKCodeSnippet id="web-angular">

RealtimeKit provides ready-to-use grid components for displaying participant videos:

```typescript title="meeting-grid.component.ts"
import { Component, Input } from "@angular/core";

@Component({
	selector: "app-meeting-grid",
	templateUrl: "./meeting-grid.component.html",
})
export class MeetingGridComponent {
	@Input() meeting: any;
}
```

```html title="meeting-grid.component.html"
<rtk-grid meeting="meeting"></rtk-grid>
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-web-components">

RealtimeKit provides ready-to-use grid components for displaying participant videos:

```jsx

	<head>
		<!-- Import RealtimeKit Core via CDN -->
		<script src="https://cdn.jsdelivr.net/npm/@cloudflare/realtimekit@latest/dist/browser.js"></script>
		<!-- Import RealtimeKit UI via CDN -->
		<script src="https://cdn.jsdelivr.net/npm/@cloudflare/realtimekit-ui@latest/dist/browser.js"></script>
	</head>
	<body>
	<rtk-ui-provider
			id="rtk-ui-provider"
			style="display: flex; flex-direction: column; height: 100vh; margin: 0;"
		>
		<rtk-grid id="my-grid" />
	</rtk-ui-provider>
	</body>
	<script>
      const searchParams = new URL(window.location.href).searchParams;
      const authToken = searchParams.get('authToken');

      if (!authToken) {
        alert(
          "An authToken wasn't passed, please pass an authToken in the URL query to join a meeting."
        );
      }

      // Initialize a meeting
      RealtimeKitClient.init({
        authToken,
      }).then((meeting) => {
		document.querySelector("rtk-ui-provider").meeting = meeting;
      });
	</script>
```

The `rtk-grid` component handles all grid-related events and data automatically. It supports:

- **`rtk-simple-grid`** - Renders participant tiles in a simple grid
- **`rtk-spotlight-grid`** - Renders pinned participants in a spotlight area with others in a smaller grid
- **`rtk-mixed-grid`** - Renders screenshares and plugins in the main view with a configurable smaller grid

</RTKCodeSnippet>

### Custom Grid using UI Kit

<RTKCodeSnippet id="web-react">

For custom video rendering, use the `RtkParticipantTile` component:

```jsx
import { RtkParticipantTile } from "@cloudflare/realtimekit-react-ui";
import { useRealtimeKitSelector } from "@cloudflare/realtimekit-react";

function CustomVideoGrid() {
	const participants = useRealtimeKitSelector((m) =>
		m.participants.active.toArray(),
	);

	return (
		<div
			style={{
				display: "grid",
				gridTemplateColumns: "repeat(auto-fit, minmax(300px, 1fr))",
			}}
		>
			{participants.map((participant) => (
				<RtkParticipantTile key={participant.id} participant={participant} />
			))}
		</div>
	);
}
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-angular">

For custom video rendering, use the `rtk-participant-tile` component.

```typescript title="custom-video-grid.component.ts"
import { Component, Input, OnInit } from "@angular/core";

@Component({
	selector: "app-custom-video-grid",
	templateUrl: "./custom-video-grid.component.html",
})
export class CustomVideoGridComponent implements OnInit {
	@Input() meeting: any;

	participants: any[] = [];

	ngOnInit() {
		this.participants = this.meeting?.participants?.active?.toArray?.() ?? [];
	}
}
```

```html title="custom-video-grid.component.html"
<div
	style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));"
>
	<rtk-participant-tile
		*ngFor="let participant of participants"
		[participant]="participant"
	></rtk-participant-tile>
</div>
```

</RTKCodeSnippet>

<RTKCodeSnippet id="web-web-components">

For custom video rendering, use the `rtk-participant-tile` component:

```jsx

	<head>
		<!-- Import RealtimeKit Core via CDN -->
		<script src="https://cdn.jsdelivr.net/npm/@cloudflare/realtimekit@latest/dist/browser.js"></script>
		<!-- Import RealtimeKit UI via CDN -->
		<script src="https://cdn.jsdelivr.net/npm/@cloudflare/realtimekit-ui@latest/dist/browser.js"></script>
	</head>
	<body>
		<rtk-ui-provider
			id="rtk-ui-provider"
			style="display: flex; flex-direction: column; height: 100vh; margin: 0;"
		>
			<rtk-participant-tile id="my-tile" />
		</rtk-ui-provider>
	</body>
	<script>
      const searchParams = new URL(window.location.href).searchParams;
      const authToken = searchParams.get('authToken');

      if (!authToken) {
        alert(
          "An authToken wasn't passed, please pass an authToken in the URL query to join a meeting."
        );
      }

      // Initialize a meeting
      const meeting = await RealtimeKitClient.init({
        authToken,
      }).then((meeting) => {
		document.querySelector("rtk-ui-provider").meeting = meeting;
        document.getElementById('my-tile').participant = meeting.self;
      });
	</script>
```

</RTKCodeSnippet>
