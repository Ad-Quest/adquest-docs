---
import { getEntry } from "astro:content";
import type { CollectionEntry } from "astro:content";

interface Props {
	product: CollectionEntry<"product-availability">["id"];
	parentheses?: string;
}

const { product, parentheses = "false" } = Astro.props;

let entry = await getEntry("product-availability", product);
let output = "";

if (!entry || !entry.data.availability) {
	console.warn(
		`Product availability value not found for product="${product}" in ${Astro.url.pathname}. Returning empty.`,
	);
}
// don't show anything for GA products
else if (entry.data.availability.toUpperCase() === "GA") {
	console.info(
		`Product availability entry is GA for product="${product}" in ${Astro.url.pathname}. Returning empty.`,
	);
}
// show an availability value
else {
	if (parentheses === "true") output = `(${entry.data.availability})`;
	else output = entry.data.availability;
}
---

{output}
